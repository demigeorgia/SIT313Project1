<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="css/onsenui.css">
  <link rel="stylesheet" href="css/onsen-css-components.min.css">
  <link rel="stylesheet" href="css/css.css">
  <script src="js/onsenui.min.js"></script>

  <script>

  //Find out how many days there are in each month
  function GetSelectedMonth(month){
    if (month == "January" || month == "March" || month == "May" || month == "July" || month == "August" || month == "October" || month == "December" ){
      daysInMonth = 31;
    }
    else if (month == "February"){
      daysInMonth = 28;
    }
    else {
      daysInMonth = 30;
    }
    return daysInMonth;
  }

  var loadFile = function(event) {
    var output = document.getElementById('output');
    output.src = URL.createObjectURL(event.target.files[0]);
  };

  document.addEventListener('init', function(event) {

    var date = new Date();
    var currentMonth = date.getMonth();
    var currentDate = date.getUTCDate();

    var eventArray = new Array();

    var month = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    var daysOfTheWeek = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];

    var dates = [];
    var dayCount = 0;
    var dayCountTwo = 1;

    //THEME COLOUS
    var lighterblue = "#e8f4f8";
    var lightergreen = "#d1e0d6";
    var lighterpink = "#fbdbdb";

    var darkerblue = "lightblue";
    var darkergreen = "#a3c1ad";
    var darkerpink = "#f39696";

    var hash = "#";

    var block = 'block';
    var none = 'none';

    // Creates click events name for each day in the list and stores in array
    for (var i = 1; i < 366; i++) {
      if (dayCount < 31){ //JAN
        dates[dayCount] = hash + month[0] + dayCountTwo;
      }
      else if (dayCount < 59){ //FEB
        if (dayCount == 31){
          dayCountTwo = 1;
        }
        dates[dayCount] = hash + month[1] + dayCountTwo;
      }
      else if (dayCount < 90){ //MAR
        if (dayCount == 59){
          dayCountTwo = 1;
        }
        dates[dayCount] = hash + month[2] + dayCountTwo;
      }
      else if (dayCount < 120){ //APR
        if (dayCount == 90){
          dayCountTwo = 1;
        }
        dates[dayCount] = hash + month[3] + dayCountTwo;
      }
      else if (dayCount < 151){ //MAY
        if (dayCount == 120){
          dayCountTwo = 1;
        }
        dates[dayCount] = hash + month[4] + dayCountTwo;
      }
      else if (dayCount < 181){ //JUN
        if (dayCount == 151){
          dayCountTwo = 1;
        }
        dates[dayCount] = hash + month[5] + dayCountTwo;
      }
      else if (dayCount < 212){ //JUL
        if (dayCount == 181){
          dayCountTwo = 1;
        }
        dates[dayCount] = hash + month[6] + dayCountTwo;
      }
      else if (dayCount < 243){ //AUG
        if (dayCount == 212){
          dayCountTwo = 1;
        }
        dates[dayCount] = hash + month[7] + dayCountTwo;
      }
      else if (dayCount < 273){ //SEP
        if (dayCount == 243){
          dayCountTwo = 1;
        }
        dates[dayCount] = hash + month[8] + dayCountTwo;
      }
      else if (dayCount < 304){ //OCT
        if (dayCount == 273){
          dayCountTwo = 1;
        }
        dates[dayCount] = hash + month[9] + dayCountTwo;
      }
      else if (dayCount < 334){ //NOV
        if (dayCount == 304){
          dayCountTwo = 1;
        }
        dates[dayCount] = hash + month[10] + dayCountTwo;
      }
      else { //DEC
        if (dayCount == 334){
          dayCountTwo = 1;
        }
        dates[dayCount] = hash + month[11] + dayCountTwo;
      }
      dayCount++;
      dayCountTwo++;
    }

    var page = event.target;

    //Store website name to be used as toolbar center text
    var websiteName = '2018 Calender';

    if (page.id === 'EditDay'){

      // Sets toolar label
      page.querySelector('ons-toolbar .center').innerHTML = websiteName;

      // Checks if page.data.events has already been defined. If it has, it is not redefined
      if (page.data.events != undefined){
        var eventArray = page.data.events;
      }

      // Stores date selected in variable
      var store = page.data.title;
      var theme = page.data.theme;

      //Creates location for heading to be placed and then sets the heading of page to 'Edit' + the selected day
      page.querySelector('#storeInDb').innerHTML += '<div id="editDayHeading" style="padding-bottom: 12px; text-align: center; font-size: 35px;"></div>';
      page.querySelector('#editDayHeading').innerHTML = "Edit Day";

      // Creates input box and sub heading
      page.querySelector('#storeInDb').innerHTML += '<div style="padding-left: 4%; padding-bottom: 10px; padding-top: 20px;">How are you feeling today (14 character limit)</div>';
      page.querySelector('#storeInDb').innerHTML += '<input type="text" style="width:92%; margin-left:4%;" id="textInputTwo" name="textInputTwo" class="text-input--underbar" maxlength="14">';

      // Creates input box and sub heading
      page.querySelector('#storeInDb').innerHTML += '<div style="padding-left: 4%; padding-bottom: 10px; padding-top: 20px;">Is there any important event on today? (14 character limit)</div>';
      page.querySelector('#storeInDb').innerHTML += '<input type="text" style="width:92%; margin-left:4%;" id="textInputThree" name="textInputThree" class="text-input--underbar" maxlength="14">';

      // Creates select box and sub heading
      page.querySelector('#storeInDb').innerHTML += '<div style="padding-left: 4%; padding-bottom: 10px; padding-top: 20px;">Would you like to include an image?</div>';
      page.querySelector('#storeInDb').innerHTML += '<ons-select style="padding-left: 4%; padding-bottom: 10px; width:92%;" id="choose-sel" ><option value="0">No image</option><option value="1">Heart</option><option value="2">Horse</option><option value="3">Model</option><option value="4">Movie Camera</option></ons-select><br><br>';


      // Creates button which links loads storeCalanderEdit.php to store data inputted
      page.querySelector('#storeInDb').innerHTML += '<input id="selectButton" class="button" type="submit" value="Submit" style="width: 60%; left: 20%; text-align: center; top: 20px; margin-bottom:20px;">';

      // Navigates the previous page when the back toolbar button is clicked
      page.querySelector('#selectButton').onclick = function() {
        var input = page.querySelector('#textInputThree').value;
        var feeling = page.querySelector('#textInputTwo').value;

        var image = '';
        var dropdown = page.querySelector('#choose-sel').value;

        //checks if only image is selted
        if (input == '' && feeling == '' && dropdown != '0'){
          page.querySelector('#dialogBox3').innerHTML = '<div id="hideEditDayDialogBox" class="alert-dialog-mask"></div><div id="hideEditDayDialogBox2" class="alert-dialog"><div id="hideEditDayDialogBox3" class="alert-dialog-container"><div id="hideEditDayDialogBox4" class="alert-dialog-content">You cannot only select an image.</div><div id="hideEditDayDialogBox5" class="alert-dialog-footer"><button id="okButton5" class="alert-dialog-button">Ok</button></div></div></div>';

          //Displays hidden dialog box
          document.querySelector('#hideEditDayDialogBox').style.display = block;
          document.querySelector('#hideEditDayDialogBox2').style.display = block;
          document.querySelector('#hideEditDayDialogBox3').style.display = block;
          document.querySelector('#hideEditDayDialogBox4').style.display = block;
          document.querySelector('#hideEditDayDialogBox5').style.display = block;
          document.querySelector('#okButton5').style.display = block;

          page.querySelector('#okButton5').onclick = function() {
            //Hides dialog box
            document.querySelector('#hideEditDayDialogBox').style.display = none;
            document.querySelector('#hideEditDayDialogBox2').style.display = none;
            document.querySelector('#hideEditDayDialogBox3').style.display = none;
            document.querySelector('#hideEditDayDialogBox4').style.display = none;
            document.querySelector('#hideEditDayDialogBox5').style.display = none;
            document.querySelector('#okButton5').style.display = none;
          };
        }
        else {

        if (dropdown == '1'){
          image = '<img src="images/heart.png" alt="Heart" class="monthImages" style="height:55px;">';
        }
        else if (dropdown == '2'){
          image = '<img src="images/horse.png" alt="Horse" class="monthImages" style="height:50px;">';
        }
        else if (dropdown == '3'){
          image = '<img src="images/fashion.png" alt="Model" class="monthImages" style="height:55px;">';
        }
        else if (dropdown == '4'){
          image = '<img src="images/film.png" alt="Movie Camera" class="monthImages" style="height:40px;">';
        }

        var joined = input.concat(','); // adds , to end of input
        joined = joined.concat(store); //adds store to end of joined
        joined = joined.concat(','); // adds , to end of joined
        joined = joined.concat(feeling); // adds feeling to end of joined
        joined = joined.concat(','); // adds , to end of joined
        joined = joined.concat(image); // adds image to end of joined

        var test = true;

        //Checks if event for a day is already inputted
        for (var i = 0; i < eventArray.length; i++) {
          var eventSplit = eventArray[i].split(',');
          if (eventSplit[1] == store){
            // if date exists, replaces the input with new input
            var joined = input.concat(',');
            joined = joined.concat(store);
            joined = joined.concat(',');
            joined = joined.concat(feeling);
            joined = joined.concat(','); // adds , to end of joined
            eventArray[i] = joined.concat(image);
            test = false;
            break;
          }
        }
        if (test == true){ //if element is not replaced, creates new element in array
          eventArray.push(joined);
        }

        // Opens month.html page, passing the website name, theme and events array
        document.querySelector('#firstPage').pushPage('Month.html', {data: {title: websiteName, theme:theme, events:eventArray}});
      }
      };

      // Navigates the previous page when the back toolbar button is clicked
      page.querySelector('#backEvent').onclick = function() {
        document.querySelector('#firstPage').pushPage('Day.html', {data: {title: websiteName, theme:theme, events:eventArray}});
      };
    };
    if (page.id === 'homePage'){

      //stores events array in variable
      var eventArray = page.data.events;

      var printCurrentDate = "";

      //Finds out what ending each number should have e.g. 1st 2nd 3rd
      var j = currentDate % 10;
      var k = currentDate % 100;

      if (j == 1 && k != 11) {
        printCurrentDate = currentDate + "st";
      }
      else if (j == 2 && k != 12) {
        printCurrentDate = currentDate + "nd";
      }
      else if (j == 3 && k != 13) {
        printCurrentDate = currentDate + "rd";
      }
      else {
        printCurrentDate = currentDate + "th";
      }

      //Stores string on homepage to display curect date
      var todaysDate = "Todays date is the " + printCurrentDate + " of " + month[currentMonth];
      page.querySelector('#todaysDate').innerHTML = todaysDate;

      // Edit Day Button is clicked
      page.querySelector('#startEditTheme').onclick = function() {
        document.querySelector('#firstPage').pushPage('EditTheme.html', {data: {title: websiteName, theme:page.data.theme, events:eventArray}});
      };
      // View Calender Button is clicked
      page.querySelector('#startCalender').onclick = function() {
        document.querySelector('#firstPage').pushPage('Month.html', {data: {title: websiteName, theme: page.data.theme, events:eventArray}});
      };

      // When edit day button is clicked
      page.querySelector('#startDay').onclick = function() {
        document.querySelector('#firstPage').pushPage('Day.html', {data: {title: websiteName, theme: page.data.theme, events:eventArray}});
      };
    }
    if (page.id === 'Day'){

      // gets selected theme and events array
      var theme = page.data.theme;
      var eventArray = page.data.events;

      //sets Middle toolbar label
      page.querySelector('ons-toolbar .center').innerHTML = page.data.title; //Days Title
      // Left toolbar button
      page.querySelector('#backEvent').onclick = function() {
        document.querySelector('#firstPage').pushPage('homePage.html', {data: {month: selectedMonth, theme: theme, events:eventArray}});
      };

      var selectedMonth = currentMonth;
      var positionInDatesArray = 0;
      var monthSelected = '';
      var count = 1;
      var daysInMonth = 0;

      // Checks if this code has already run once or not.
      // Sets the heading as the currently selected month
      if (page.data.month === undefined){
        page.querySelector('#displayMonthDay').innerHTML = month[selectedMonth] + " 2018";
      }
      else {
        // stores the selected month (in number form i.e January == 0, February == 1)
        selectedMonth = page.data.month;
        page.querySelector('#displayMonthDay').innerHTML = month[selectedMonth] + " 2018";
      }

      var colourCount = 0;

      if (theme == "blue"){
        selectedColour = lighterblue;
        document.body.style.backgroundColor = darkerblue;
      }
      else if (theme == "green"){
        selectedColour = lightergreen;
        document.body.style.backgroundColor = darkergreen;
      }
      else {
        selectedColour = lighterpink;
        document.body.style.backgroundColor = darkerpink;
      }

      // Finds out how many days there are in the selected month
      daysInMonth = GetSelectedMonth(month[selectedMonth]);

      // The heading of the page
      page.querySelector('#dayList').innerHTML += '<div style="font-size: 25px;" id="displayMonth"></div>';

      page.querySelector('#dayList').innerHTML += '<ul>';

      // Creates list item for every day of the selected month
      for (var i = 0; i < daysInMonth; i++){

        colourCount++;

        if (colourCount % 2 === 0){
          colour = selectedColour;
        }
        else {
          colour = "white";
        }

        if (i == currentDate-1){
          page.querySelector('#dayList').innerHTML += "<li style= 'background-color:"+ colour +"' class='list__item list--inset__item list__item--chevron list__item--tappable'><div id='"+ month[selectedMonth] + (i+1) + "' class='list__item__center'>" + month[selectedMonth] + ", Day " + (i+1) + "  TODAY</div></li>";
        }
        else {
          page.querySelector('#dayList').innerHTML += "<li style= 'background-color:"+ colour +"' class='list__item list--inset__item list__item--chevron list__item--tappable'><div id='"+ month[selectedMonth] + (i+1) + "' class='list__item__center'>" + month[selectedMonth] + ", Day " + (i+1) + "</div></li>";
        }

      }
      page.querySelector('#dayList').innerHTML += '</ul>';

      // Selects where the array should start reading information from
      if (month[selectedMonth] == "January"){
        positionInDatesArray = 0;
      }
      else if (month[selectedMonth] == "February"){
        positionInDatesArray = 31;
      }
      else if (month[selectedMonth] == "March"){
        positionInDatesArray = 59;
      }
      else if (month[selectedMonth] == "April"){
        positionInDatesArray = 90;
      }
      else if (month[selectedMonth] == "May"){
        positionInDatesArray = 120;
      }
      else if (month[selectedMonth] == "June"){
        positionInDatesArray = 151;
      }
      else if (month[selectedMonth] == "July"){
        positionInDatesArray = 181;
      }
      else if (month[selectedMonth] == "August"){
        positionInDatesArray = 212;
      }
      else if (month[selectedMonth] == "September"){
        positionInDatesArray = 243;
      }
      else if (month[selectedMonth] == "October"){
        positionInDatesArray = 273;
      }
      else if (month[selectedMonth] == "November"){
        positionInDatesArray = 304;
      }
      else {
        positionInDatesArray = 334;
      }

      // Creates an click event for every day in the selected month
      // Uses the title on the 'EditDay.html' to display and store data
      page.querySelector(dates[positionInDatesArray]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "1", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+1]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "2", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+2]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "3", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+3]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "4", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+4]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "5", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+5]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "6", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+6]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "7", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+7]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "8", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+8]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "9", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+9]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "10", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+10]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "11", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+11]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "12", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+12]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "13", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+13]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "14", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+14]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "15", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+15]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "16", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+16]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "17", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+17]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "18", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+18]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "19", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+19]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "20", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+20]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "21", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+21]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "22", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+22]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "23", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+23]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "24", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+24]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "25", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+25]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "26", theme:theme, events:eventArray}});
      };
      page.querySelector(dates[positionInDatesArray+26]).onclick = function() {
        document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "27", theme:theme, events:eventArray}});
      };

      // if the month is February, it stops storing numbers after 28
      if (month[selectedMonth] != "February"){
        page.querySelector(dates[positionInDatesArray+27]).onclick = function() {
          document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "28", theme:theme, events:eventArray}});
        };
        page.querySelector(dates[positionInDatesArray+28]).onclick = function() {
          document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "29", theme:theme, events:eventArray}});
        };
        // if the month is Jan, Mar, May etc, it stops storing numbers after 30
        if (month[selectedMonth] == "January" || month[selectedMonth] == "March" || month[selectedMonth] == "May" || month[selectedMonth] == "July" || month[selectedMonth] == "August" || month[selectedMonth] == "October" || month[selectedMonth] == "December" )
        {
          page.querySelector(dates[positionInDatesArray+29]).onclick = function() {
            document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "30", theme:theme, events:eventArray}});
          };
          page.querySelector(dates[positionInDatesArray+30]).onclick = function() {
            document.querySelector('#firstPage').pushPage('EditDay.html', {data: {title: month[selectedMonth] + "31", theme:theme, events:eventArray}});
          };
        }
      }

      // Navigates to the previous month if the month is not January
      page.querySelector('#backMonthInDays').onclick = function() {
        if (selectedMonth != 0){
          selectedMonth--;
          // stores the selected month ie March in variable to be used when code is run again
          document.querySelector('#firstPage').pushPage('Day.html', {data: {month: selectedMonth, title: '2018 Calender', theme:theme, events:eventArray}});
        }
        else {
          page.querySelector('#dialogBox2').innerHTML = '<div id="hideDayDialogBox" class="alert-dialog-mask"></div><div id="hideDayDialogBox2" class="alert-dialog"><div id="hideDayDialogBox3" class="alert-dialog-container"><div id="hideDayDialogBox4" class="alert-dialog-content">You cannot go back,<br>January is the first month.</div><div id="hideDayDialogBox5" class="alert-dialog-footer"><button id="okButton3" class="alert-dialog-button">Ok</button></div></div></div>';

          //Displays hidden dialog box
          document.querySelector('#hideDayDialogBox').style.display = block;
          document.querySelector('#hideDayDialogBox2').style.display = block;
          document.querySelector('#hideDayDialogBox3').style.display = block;
          document.querySelector('#hideDayDialogBox4').style.display = block;
          document.querySelector('#hideDayDialogBox5').style.display = block;
          document.querySelector('#okButton3').style.display = block;

          page.querySelector('#okButton3').onclick = function() {
            //Hides dialog box
            document.querySelector('#hideDayDialogBox').style.display = none;
            document.querySelector('#hideDayDialogBox2').style.display = none;
            document.querySelector('#hideDayDialogBox3').style.display = none;
            document.querySelector('#hideDayDialogBox4').style.display = none;
            document.querySelector('#hideDayDialogBox5').style.display = none;
            document.querySelector('#okButton3').style.display = none;
          };
        }
      };

      // Navigates to the following month if the month is not December
      page.querySelector('#forwardMonthInDays').onclick = function() {
        if (selectedMonth != 11){
          selectedMonth++;
          // stores the selected month ie March in variable to be used when code is run again
          document.querySelector('#firstPage').pushPage('Day.html', {data: {month: selectedMonth, title: '2018 Calender', theme: theme, events:eventArray}});
        }
        else {
          page.querySelector('#dialogBox2').innerHTML = '<div id="hideDayDialogBox6" class="alert-dialog-mask"></div><div id="hideDayDialogBox7" class="alert-dialog"><div id="hideDayDialogBox8" class="alert-dialog-container"><div id="hideDayDialogBox9" class="alert-dialog-content">You cannot go back,<br>January is the first month.</div><div id="hideDayDialogBox10" class="alert-dialog-footer"><button id="okButton4" class="alert-dialog-button">Ok</button></div></div></div>';

          //Displays hidden dialog box
          document.querySelector('#hideDayDialogBox6').style.display = block;
          document.querySelector('#hideDayDialogBox7').style.display = block;
          document.querySelector('#hideDayDialogBox8').style.display = block;
          document.querySelector('#hideDayDialogBox9').style.display = block;
          document.querySelector('#hideDayDialogBox10').style.display = block;
          document.querySelector('#okButton4').style.display = block;

          page.querySelector('#okButton4').onclick = function() {
            //Hides dialog box
            document.querySelector('#hideDayDialogBox6').style.display = none;
            document.querySelector('#hideDayDialogBox7').style.display = none;
            document.querySelector('#hideDayDialogBox8').style.display = none;
            document.querySelector('#hideDayDialogBox9').style.display = none;
            document.querySelector('#hideDayDialogBox10').style.display = none;
            document.querySelector('#okButton4').style.display = none;
          };
        }
      };
    }
    if (page.id === 'Month'){
      //gets selected theme
      var theme = page.data.theme;

      //Checks if the events array exists. if it isn't, sets the variable to its value
      if (page.data.events != undefined){
        var eventArray = page.data.events;
      }

      // Navigates back a month if the month is not January
      page.querySelector('#backMonth').onclick = function() {
        if (selectedMonth != 0){
          selectedMonth--;
          // stores selected month in variable to be passed and used when code is rerun
          document.querySelector('#firstPage').pushPage('Month.html', {data: {month: selectedMonth, title: '2018 Calender', theme: theme, events:eventArray}});
        }
        else {
          page.querySelector('#dialogBox').innerHTML = '<div id="hideDialogBox" class="alert-dialog-mask"></div><div id="hideDialogBox2" class="alert-dialog"><div id="hideDialogBox3" class="alert-dialog-container"><div id="hideDialogBox4" class="alert-dialog-content">You cannot go back,<br>January is the first month.</div><div id="hideDialogBox5" class="alert-dialog-footer"><button id="okButton" class="alert-dialog-button">Ok</button></div></div></div>';

          //Displays hidden dialog box
          document.querySelector('#hideDialogBox').style.display = block;
          document.querySelector('#hideDialogBox2').style.display = block;
          document.querySelector('#hideDialogBox3').style.display = block;
          document.querySelector('#hideDialogBox4').style.display = block;
          document.querySelector('#hideDialogBox5').style.display = block;
          document.querySelector('#okButton').style.display = block;

          page.querySelector('#okButton').onclick = function() {
            //Hides dialog box
            document.querySelector('#hideDialogBox').style.display = none;
            document.querySelector('#hideDialogBox2').style.display = none;
            document.querySelector('#hideDialogBox3').style.display = none;
            document.querySelector('#hideDialogBox4').style.display = none;
            document.querySelector('#hideDialogBox5').style.display = none;
            document.querySelector('#okButton').style.display = none;
          };
        }
      };

      // Navigates forward a month if the month is not December
      page.querySelector('#forwardMonth').onclick = function() {
        if (selectedMonth != 11){
          selectedMonth++;
          // stores selected month in variable to be passed and used when code is rerun
          document.querySelector('#firstPage').pushPage('Month.html', {data: {month: selectedMonth, title: '2018 Calender', theme: theme, events:eventArray}});
        }
        else {
          page.querySelector('#dialogBox').innerHTML = '<div id="hideDialogBox6" class="alert-dialog-mask"></div><div id="hideDialogBox7" class="alert-dialog"><div id="hideDialogBox8" class="alert-dialog-container"><div id="hideDialogBox9" class="alert-dialog-content">You cannot go forward,<br>December is the last month.</div><div id="hideDialogBox10" class="alert-dialog-footer"><button id="okButton2" class="alert-dialog-button">Ok</button></div></div></div>';

          //Displays hidden dialog box
          document.querySelector('#hideDialogBox6').style.display = block;
          document.querySelector('#hideDialogBox7').style.display = block;
          document.querySelector('#hideDialogBox8').style.display = block;
          document.querySelector('#hideDialogBox9').style.display = block;
          document.querySelector('#hideDialogBox10').style.display = block;
          document.querySelector('#okButton2').style.display = block;

          page.querySelector('#okButton2').onclick = function() {
            //Hides dialog box
            document.querySelector('#hideDialogBox6').style.display = none;
            document.querySelector('#hideDialogBox7').style.display = none;
            document.querySelector('#hideDialogBox8').style.display = none;
            document.querySelector('#hideDialogBox9').style.display = none;
            document.querySelector('#hideDialogBox10').style.display = none;
            document.querySelector('#okButton2').style.display = none;
          };
        }
      };

      // Sets toolar label
      page.querySelector('ons-toolbar .center').innerHTML = websiteName;

      // Goes to homepage when user clicks the toolbar back button
      page.querySelector('#backEvent').onclick = function() {
        document.querySelector('#firstPage').pushPage('homePage.html', {data: {month: selectedMonth, theme: theme, events:eventArray}});
      };

      //Changs the backgroundColor and table/list colour depending on theme
      if (theme == "pink"){
        selectedColour = lighterpink;
        document.body.style.backgroundColor = darkerpink;
      }
      else if (theme == "blue"){
        selectedColour = lighterblue;
        document.body.style.backgroundColor = darkerblue;
      }
      else if (theme == "green"){
        selectedColour = lightergreen;
        document.body.style.backgroundColor = darkergreen;
      }
      else {
        selectedColour = lighterpink;
        document.body.style.backgroundColor = darkerpink;
      }

      var selectedMonth = currentMonth;

      // Checks if this code has already run once or not.
      // Sets the heading as the currently selected month
      if (page.data.month === undefined){
        page.querySelector('#displayMonth').innerHTML = month[selectedMonth] + " 2018";
      }
      else {
        // sets the selectedMonth variable to the current month
        selectedMonth = page.data.month;
        page.querySelector('#displayMonth').innerHTML = month[selectedMonth] + " 2018";
      }

      var count = 1;
      table = '';

      // Finds out how many days there are in the selected month
      var daysInMonth = GetSelectedMonth(month[selectedMonth]);

      // Stores table in variable
      table += '<table style="width: 100%;border-collapse: collapse; margin-top: 20px; border-bottom: 1px solid white;" >';
      table += '<div style="font-size: 50px;" id="displayMonth"></div>';

      var weekday = 0;

      // Finds out what day the selected month should start on
      if (selectedMonth == 0 || selectedMonth == 9){
        weekDay = 0;
      }
      else if (selectedMonth == 1 || selectedMonth == 2 || selectedMonth == 10){
        weekDay = 3;
      }
      else if (selectedMonth == 3 || selectedMonth == 6){
        weekDay = 6;
      }
      else if (selectedMonth == 4){
        weekDay = 1;
      }
      else if (selectedMonth == 5){
        weekDay = 4;
      }
      else if (selectedMonth == 7){
        weekDay = 2;
      }
      else if (selectedMonth == 8 || selectedMonth == 11){
        weekDay = 5;
      }

      var colourCount = 0;
      var colour = "";
      var elementPosition = 0;
      var inputMonth = "";
      var inputDay = "";

      var test = false;

      // Creates 8 rows and 4 columns
      for (var i = 0; i < 11; i++) {
        table += '<tr>';
        for (var j = 0; j < 3; j++) {

          // stops creating elements when there are no more days in the month
          if (count > daysInMonth){
            break;
            break;
          }

          table += '<td style="width:33%;">';

          colourCount++;

          //sets the selectedColour as every second elements backgroundColor
          if (colourCount % 2 === 0){
            colour = selectedColour;
          }
          else {
            colour = "white";
          }

          //checks if the events array is defined and the event is defined
          if (page.data.events != undefined && eventArray[elementPosition] != undefined) {
            //splits array element into selected day and event inputted
            var eventSplit = eventArray[elementPosition].split(',');
            elementPosition++;

            //Removes the number from the end of the string
            inputMonth = eventSplit[1].replace(/[^a-zA-Z]/g, '');
            //Remvoes the letters from the start of the string
            inputDay = eventSplit[1].replace(/[^0-9]/g, '');

            //Checks what number the selected month is i.e. Jan is 0, Feb is 1
            var inputMonthTnt = 0;
            if(inputMonth == "January"){
              inputMonthTnt = 0;
            }
            else if(inputMonth == "February"){
              inputMonthTnt = 1;
            }
            else if(inputMonth == "March"){
              inputMonthTnt = 2;
            }
            else if(inputMonth == "April"){
              inputMonthTnt = 3;
            }
            else if(inputMonth == "May"){
              inputMonthTnt = 4;
            }
            else if(inputMonth == "June"){
              inputMonthTnt = 5;
            }
            else if(inputMonth == "July"){
              inputMonthTnt = 6;
            }
            else if(inputMonth == "August"){
              inputMonthTnt = 7;
            }
            else if(inputMonth == "September"){
              inputMonthTnt = 8;
            }
            else if(inputMonth == "October"){
              inputMonthTnt = 9;
            }
            else if(inputMonth == "November"){
              inputMonthTnt = 10;
            }
            else if(inputMonth == "December"){
              inputMonthTnt = 11;
            }
          }

          var todaysEvent = "";
          var todaysImage = "";
          var todaysFeelings = "";
          var todaysPrint = "";

          //displays data stored in eventArray
          //checks if event in array exists for this day
          if (count == inputDay && selectedMonth == inputMonthTnt){
            if (eventSplit[0] != '')
            {
              todaysEvent = eventSplit[0].toUpperCase();
            }
            else
            { //sets to default text
              todaysEvent = "NONE";
            }

            if (eventSplit[2] != '')
            {
              todaysFeelings = '<br>FEELING:<br>' + eventSplit[2].toUpperCase();
            }
            else
            { //prints nothing
              todaysFeelings = "";
            }

            if (eventSplit[3] != ''){
              todaysImage = eventSplit[3];
            }
            else {
              todaysImage = '';
            }
          } // changes what's printed in each element depending on what day it is
          else if (count == currentDate && selectedMonth == currentMonth){
            todaysPrint = "TODAY";
            todaysEvent = "NONE";
          }
          else if (count == 1 && selectedMonth == 0){
            todaysEvent = "NEW YEARS DAY";
          }
          else if (count == 2 && selectedMonth == 0){
            todaysEvent = "NEW YEARS HOLIDAY";
          }
          else if (count == 26 && selectedMonth == 0){
            todaysEvent = "AUSTRALIA DAY";
            todaysImage = '<img src="images/australia.png" alt="Australia" class="monthImages" style="width:70px; height:55px;">';
          }
          else if (count == 14 && selectedMonth == 1){
            todaysEvent = "VALENTINES DAY";
            todaysImage = '<img src="images/heart.png" alt="Love Heart" class="monthImages" style="height:53px;width:57px;">';
          }
          else if ((count == 24 || count == 25 || count == 26) && selectedMonth == 2){
            todaysEvent = "FORMULA 1 GRAND PRIX";
            todaysImage = '<img src="images/car.png" alt="Racing Car" class="monthImages" style="height:35px; width:65px;">';
          }
          else if (count == 25 && selectedMonth == 3){
            todaysEvent = "ANZAC DAY";
            todaysImage = '<img src="images/poppy.png" alt="Anzac Poppy" class="monthImages" style="height:56px;">';
          }
          else if (count == 30 && selectedMonth == 3){
            todaysEvent = "GOOD FRIDAY";
          }
          else if (count == 31 && selectedMonth == 3){
            todaysEvent = "EASTER SATURDAY";
          }
          else if (count == 1 && selectedMonth == 4){
            todaysEvent = "EASTER SUNDAY";
            todaysImage = '<img src="images/egg.png" alt="Easter Egg" class="monthImages" style="height:55px;">';
          }
          else if (count == 2 && selectedMonth == 4){
            todaysEvent = "EASTER MONDAY";
          }
          else if ((count == 2 || count == 9 || count == 16 ) && selectedMonth == 7){
            todaysEvent = "WINTER NIGHT MARKET";
            todaysImage = '<img src="images/market.png" alt="Strawberries" class="monthImages" style="height:50px;">';
          }
          else if ((count == 1 || count == 2 || count == 3 || count == 4 || count == 5 || count == 6 || count == 7 || count == 8) && selectedMonth == 8){
            todaysEvent = "SPRING FASHION WEEK";
            todaysImage = '<img src="images/fashion.png" alt="Model" class="monthImages" style="height:65px; ">';
          }
          else if ((count == 20 || count == 21 || count == 22) && selectedMonth == 9){
            todaysEvent = "AUSTRALIAN MOTORCYCLE GRAND PRIX";
            todaysImage = '<img src="images/bike.png" alt="Motorbike" class="monthImages" style="height:50px; margin-right:0px;">';
          }
          else if (count == 31 && selectedMonth == 9){
            todaysEvent = "HALLOWEEN";
            todaysImage = '<img src="images/pumpkin.png" alt="Halloween Pumpkin" class="monthImages" style="height:58px;">';
          }
          else if (count == 4 && selectedMonth == 10){
            todaysEvent = "SPRING RACING CARNIVAL";
            todaysImage = '<img src="images/horse.png" alt="Running Horse" class="monthImages" style="height:46px;">';
          }
          else if (count == 7 && selectedMonth == 10){
            todaysEvent = "MELBOURNE CUP";
            todaysImage = '<img src="images/horse.png" alt="Running Horse" class="monthImages" style="height:46px;">';
          }
          else if (count == 24 && selectedMonth == 11){
            todaysEvent = "CHRISTMAS EVE";
          }
          else if (count == 25 && selectedMonth == 11){
            todaysEvent = "CHRISTMAS DAY";
            todaysImage = '<img src="images/tree.png" alt="Christmas Tree" class="monthImages" style="height:63px;">';
          }
          else if (count == 26 && selectedMonth == 11){
            todaysEvent = "BOXING DAY";
          }
          else if (count == 31 && selectedMonth == 11){
            todaysEvent = "NEW YEARS EVE";
            todaysImage = '<img src="images/firework.png" alt="Firework" class="monthImages" style="height:63px;">';
          }
          else  {
            todaysEvent = "NONE";
          }

          //creates list item with the selected values
          table += '<ul style="background-color:'+ colour +'; height: 250px;" class="list list--material"><li class="list__header list__header--material" style"65%;">'+ daysOfTheWeek[weekDay] + ' ' + count + ' ' + todaysPrint + '</li><li class="list__item list__item--material"><div class="list__item--material__center" style="padding: 12px 6px 0px 0px; width:100%;"><div class="list__item__title list__item--material__title"></div><div class="list__item__subtitle list__item--material__ subtitle" style="font-size:12px;" id="' + month[selectedMonth] + count +'">EVENT:<br>'+ todaysEvent + '<br>' + todaysFeelings + '<br>' + todaysImage +'</div></div></div></li></ul>';

          table += '</td>';

          weekDay++;

          //if the weekday is sunday, resets it to monday to start the week again
          if (weekDay == 7){
            weekDay = 0;
          }
          count++;
        }
        table += '</tr>';
      }
      table += '</table>';

      // Stores table variable in div to display
      page.querySelector('#tableElements').innerHTML = table;

    }
    if (page.id === 'EditTheme'){
      // Sets toolar label
      page.querySelector('ons-toolbar .center').innerHTML = websiteName;

      var eventArray = page.data.events;

      // Stores date selected in variable
      var store = page.data.title;

      //Creates location for heading to be placed and then sets the heading of page to 'Edit' + the selected day
      page.querySelector('#storeInDb').innerHTML += '<div id="editThemeHeading" style="style="padding-bottom: 12px; text-align: center; font-size: 35px;"></div>';
      page.querySelector('#editThemeHeading').innerHTML = "Edit Theme";

      // Creates radio buttons and sub heading
      page.querySelector('#storeInDb').innerHTML += '<div style="padding-left: 4%; padding-bottom: 10px; padding-top:8px;">What colour theme would you like?</div>';
      page.querySelector('#storeInDb').innerHTML += '<div style="padding-left: 4%;"><label style="padding-bottom:8px;" class="radio-button radio-button--material"><input type="radio" id="r1" value="pink" class="radio-button__input radio-button--material__input" name="r" checked="checked"><div class="radio-button__checkmark radio-button--material__checkmark"></div> Pink</label><br><label style="padding-bottom:8px;" class="radio-button radio-button--material"><input type="radio" id="r2" value="blue" class="radio-button__input radio-button--material__input" name="r"><div class="radio-button__checkmark radio-button--material__checkmark"></div> Blue</label><br><label style="padding-bottom:8px;" class="radio-button radio-button--material"><input type="radio" id="r3" value="green" class="radio-button__input radio-button--material__input" name="r"><div class="radio-button__checkmark radio-button--material__checkmark"></div> Green</label></div>';

      //Submit button
      page.querySelector('#storeInDb').innerHTML += '<ons-button id="submitTheme" class="button" style="width: 60%; left: 20%; text-align: center; top: 20px; margin-bottom:20px;">Submit</ons-button>';



      //stores the theme in variable and passes it to the calender page
      page.querySelector('#submitTheme').onclick = function() {
        var theme = document.querySelector('input[name=r]:checked').value;
        document.querySelector('#firstPage').pushPage('Month.html', {data: {title: "View Day", theme: theme, events:eventArray}});
      }

      // Navigates the previous page when the back toolbar button is clicked
      page.querySelector('#backEvent').onclick = function() {
        document.querySelector('#firstPage').popPage();
      };
    };
  });

  </script>

  <style>
    @font-face { font-family: JandaHappyDay; src: url('fonts/JandaHappyDay.ttf'); }
    headingStyle { font-size: 35px; font-family: JandaHappyDay, sans-serif; color: #333;}
  </style>

  </head>
  <body>

  <ons-navigator id="firstPage" page="homePage.html"></ons-navigator>

  <ons-template id="homePage.html">
    <ons-page id="homePage">
      <!-- Toolbar center text-->
      <ons-toolbar>
        <div class="center" style="color: white;"></div>
      </ons-toolbar>
      <p style="padding-left: 20px;">
        <div style="padding-top: 20px; padding-bottom: 20px; text-align:center;">
          <!-- Page heading -->
          <headingStyle style="font-size: 35px;">2018 Calender</headingStyle><br><br>
        </div>
        <div style="left: 0px; top: 0px; border-top: 1px solid black; width: 100%; height: auto; padding-bottom:20px; background-color: white;">
        <!-- Page introduction -->
        <div style="text-align: center; font-size: 16px; padding: 0px 30px;">
          <br>

            <headingStyle style="font-size: 16px;" id="todaysDate"></headingStyle><br><br>
          Keep track of upcoming events in Melbourne and Australia using this online<br>easy to use web-based Calender.
        </div>
      </div>
      </p>
      <!-- Navigation buttons -->
      <ons-button id="startCalender" class="homePageButtons">View Calender</ons-button>
      <ons-button id="startEditTheme" class="homePageButtons" style="top: 15px;">Edit Theme</ons-button>
      <ons-button id="startDay" class="homePageButtons" style="top: 30px;margin-bottom:20px;">Edit Day</ons-button>
    </ons-page>
  </ons-template>

  <ons-template id="Month.html">
    <ons-page id="Month">
      <!-- Toolbar back button and center text-->
      <ons-toolbar>
        <div class="left" id="backEvent" style="color: white; padding-left: 8px; cursor: pointer;">< Back</div>
        <div class="center" style="color: white;"></div>
        <button id="backMonth" class="right fab fab--mini" style="cursor: pointer; width:50px; border-radius:0%; margin-top:2px;"><<</button>
        <button id="forwardMonth" class="right fab fab--mini" style="cursor: pointer; width:50px; border-radius:0%; margin-top:2px;">>></button>
      </ons-toolbar>

      <!-- Page heading, the current month selected -->
      <p style="padding-left:5px; padding-right:5px;">
        <div style="padding-top: 20px; padding-left: 20px; text-align:center;">
          <!-- Page heading -->
          <headingStyle id="displayMonth" style="font-size: 35px;"></headingStyle>
        </div>
      </p>
      <!-- Displays days in the current selected month in a table -->
      <div style="padding-top:20px;" id="tableElements"></div>
      <div style="z-index: 999;" id="dialogBox"></div>
    </ons-page>
  </ons-template>

  <ons-template id="Day.html">
    <ons-page id="Day">
      <!-- Toolbar back button and center text-->
      <ons-toolbar>
        <div class="left" id="backEvent" style="color: white; padding-left: 8px;">< Back</div>
        <div class="center" style="color: white;"></div>
        <button id="backMonthInDays" class="right fab fab--mini" style="cursor: pointer; width:50px; border-radius:0%; margin-top:2px;"><<</button>
        <button id="forwardMonthInDays" class="right fab fab--mini" style="cursor: pointer; width:50px; border-radius:0%; margin-top:2px;">>></button>
      </ons-toolbar>
      <!-- Page heading, the current month selected -->
      <p style="padding-left:5px; padding-right:5px;">
        <div style="padding-top: 20px; padding-left: 20px; text-align:center;">
          <!-- Page heading -->
          <headingStyle id="displayMonthDay" style="font-size: 50px;"></headingStyle>
        </div>
      </p>
      <!-- Displays a list of days in the current selected month -->
      <div id="dayList"></div>
      <div style="z-index: 999;" id="dialogBox2"></div>
    </ons-page>
  </ons-template>

  <ons-template id="EditDay.html">
    <ons-page id="EditDay" ng-controller="Controller">
      <!-- Toolbar back button and center text-->
      <ons-toolbar>
        <div class="left" id="backEvent" style="color: white; padding-left: 8px;  cursor: pointer;">< Back</div>
        <div class="center" style="color: white;"></div>
      </ons-toolbar>
      <p style="padding-left:5px; padding-right:5px;">
        <div style="padding-top: 20px; padding-left: 20px; text-align:center;">
          <!-- Page heading -->
          <headingStyle id="editDayHeading" style="font-size: 50px;"></headingStyle>
        </div>
      </p>
      <!-- Input deviced stored in a form so all data is transfered to storeCalenderEdit.php when the form is submitted-->
      <div id="storeInDb"></div>
      <div style="z-index: 999;" id="dialogBox3"></div>
    </ons-page>
  </ons-template>

  <ons-template id="EditTheme.html">
    <ons-page id="EditTheme" ng-controller="Controller">
      <!-- Toolbar back button and center text-->
      <ons-toolbar>
        <div class="left" id="backEvent" style="color: white; padding-left: 8px; cursor: pointer;">< Back</div>
        <div class="center" style="color: white;"></div>
      </ons-toolbar>
      <p style="padding-left:5px; padding-right:5px;">
        <div style="padding-top: 20px; padding-left: 20px; text-align:center;">
          <!-- Page heading -->
          <headingStyle id="editThemeHeading" style="font-size: 50px;">Edit Theme</headingStyle><br><br>
        </div>
      </p>
      <!-- Input deviced stored in a form so all data is transfered to storeCalenderEdit.php when the form is submitted-->
      <div id="storeInDb"></div>
    </ons-page>
  </ons-template>

</body>
</html>
